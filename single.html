<!DOCTYPE html>


<html>

  <head>
    <title>Random Cat</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-material-design.min.css" rel="stylesheet">
    <link href="css/ripples.min.css" rel="stylesheet">
    <link href="css/snackbar.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  </head>
  <body>
    <style>
      html, body{
        margin:0px;
        border:0px;
        padding:0px;
      }
      #cat{
        width: 100%;
        max-width:100%;
      }
      a[disabled] {
        pointer-events: none;
      }
    </style>

    <nav class="navbar navbar-primary">
      <div class="container-fluid">
        <div class="navbar-header">
         <a class="navbar-brand" href="#">Random Cat</a>
       </div>
     </div>
    </nav>

    <div class="col-md-7 col-md-offset-1">
      <div class="panel panel-primary">
        <a href="index.html" id="back">
          <button type="button" class="btn btn-primary btn-block">
            <span class="glyphicon glyphicon-arrow-left"></span> <span id="back-text">Back to Browse</span>
          </button>
        </a>
      </div>
    </div>

    <div class="col-md-7 col-md-offset-1">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h2 id="picture-title" class="panel-title">Random Cat</h2>
        </div>
        <div class="panel-body">
          <img src="loading.gif" id="cat"/>
        </div>
      </div>
    </div>

    <div class="col-md-offset-1 col-md-3">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Random Cat</h3>
        </div>
        <div class="panel-body">
          <p>
            <a id="download-link" href="loading.gif" download>
              <button id="download-btn" type="button" class="btn btn-lg btn-block btn-primary">
                Download&nbsp;<span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>
              </button>
            </a>
          </p>

          <p>
            <button type="button" class="btn btn-lg btn-primary btn-block" onclick="starCurrent()" id="star-btn">
              Star Cat &nbsp; <span class="glyphicon glyphicon-star"></span>
            </button>
          </p>
          <p>
            <a href="" id="sourcelink">
              <button id="view-btn" type="button" class="btn btn-lg btn-primary btn-block">
                View Cat
              </button>
            </a>
          </p>

          <div class="input-group">
            <span class="input-group-addon">URL</span>
            <input id="sourceurl" type="text" class="form-control" readonly value="">
          </div>

          <p>
            <a href="saved.html">
              <button type="button" class="btn btn-lg btn-block btn-primary">
                View Starred Cats
              </button>
            </a>
          </p>
        </div>
      </div>
    </div>

    <div class="col-md-3 col-md-offset-1">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">About Random Cat</h3>
        </div>
        <div class="panel-body">
          <p>
            <small>
              <p>
                Special thanks to <a href="http://thecatapi.com/">The Cat API</a>
              </p>
              <p>
                <a href="https://jquery.com/">jQuery</a>
                |
                <a href="http://getbootstrap.com/">Bootstrap</a>
                |
                <a href="http://fezvrasta.github.io/bootstrap-material-design/">Bootstrap Theme</a>
              </br>

                <a href="https://github.com/FezVrasta/snackbarjs">Snackbar</a>
                |
                <a href="http://bootboxjs.com/">Bootbox</a>
                |
                <a href="https://github.com/js-cookie/js-cookie">js-cookie</a>
              </p>
              <p>
                Made by <a href="https://github.com/alexoro412/"> alexoro412</a>
              </p>
              <p>
                This site uses cookies for keeping your starred cats
              </p>
              <p>
                I take no responsbility for any of these pictures whatsoever
              </p>
            </small>
          </p>
        </div>
      </div>
    </div>

    <script src="js/jquery-2.2.3.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/snackbar.min.js"></script>
    <script src="js/js-cookie.js"></script>
    <script src="js/bootbox.js"></script>

    <script>

    currentCatId = "";
    var QueryString = function () {
      // This function is anonymous, is executed immediately and
      // the return value is assigned to QueryString!
      var query_string = {};
      var query = window.location.search.substring(1);
      var vars = query.split("&");
      for (var i=0;i<vars.length;i++) {
        var pair = vars[i].split("=");
            // If first entry with this name
        if (typeof query_string[pair[0]] === "undefined") {
          query_string[pair[0]] = decodeURIComponent(pair[1]);
            // If second entry with this name
        } else if (typeof query_string[pair[0]] === "string") {
          var arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];
          query_string[pair[0]] = arr;
            // If third or later entry with this name
        } else {
          query_string[pair[0]].push(decodeURIComponent(pair[1]));
        }
      }
        return query_string;
    }();

    document.getElementById("cat").src = "http://thecatapi.com/api/images/get?image_id=" + QueryString.id;
    document.getElementById("picture-title").innerHTML = QueryString.id;
    currentCatId = QueryString.id;
    document.getElementById("download-link").href = "http://thecatapi.com/api/images/get?image_id=" + QueryString.id;
    document.getElementById("sourcelink").href = "single.html?id=" + QueryString.id;
    document.getElementById("sourceurl").value = "http://alexoro412.github.com/randomcat/single.html?id=" + QueryString.id;
    if(QueryString.fromStarred != undefined){
      document.getElementById("back").href = "saved.html";
      document.getElementById("back-text").innerHTML = "Back to Starred";
    }else{
      document.getElementById("view-btn").style.display = "none";
      document.getElementById("sourcelink").style.display = "none";
    }
    function star(id){
      if(Cookies.get("saved") == undefined){
        Cookies.set("saved", [id]);
      }else{
        var arr = Cookies.getJSON("saved");
        if(arr.indexOf(id) == -1){
          $.snackbar({content: "Starred Cat"});
          arr.push(id);
          Cookies.set("saved", arr);
        }
      }
    }

    function starCurrent(){
      star(currentCatId);
      document.getElementById("star-btn").disabled = true;
    }

    $( "#cat" ).dblclick(function() {
      starCurrent();
    });

    </script>
  </body>
</html>
